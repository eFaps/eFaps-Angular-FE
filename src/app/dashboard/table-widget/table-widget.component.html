@if (loading()) {
  <div class="loading">
    <p-progress-spinner ariaLabel="loading" />
  </div>
} @else {
  <p-table
    [columns]="cols"
    [value]="elements"
    styleClass="p-datatable-sm"
    scrollHeight="flex"
    [scrollable]="true"
    stripedRows>
    <ng-template pTemplate="caption">
      @if (widget?.title) {
        <div class="title">
          {{ widget?.title }}
        </div>
      }
    </ng-template>
    <ng-template pTemplate="header" let-columns>
      <tr>
        @for (col of columns; track col) {
          <th>
            {{ col.header }}
          </th>
        }
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowData let-columns="columns">
      <tr>
        @for (col of columns; track col) {
          <td class="small">
            @if (isLink(col.key)) {
              <p-button
                icon="pi pi-link"
                [rounded]="true"
                [outlined]="true"
                (click)="followLink(rowData[col.key])"
                [style]="{ width: '1.5rem', height: '1.5rem' }"></p-button>
            } @else {
              {{ rowData[col.key] }}
            }
          </td>
        }
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="columns.length">No hay data...</td>
      </tr>
    </ng-template>
  </p-table>
}
